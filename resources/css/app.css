@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
	.prose p, .prose ul, .prose ol, .prose h1, .prose h2, .prose h3 {
		@apply max-w-4xl;
		max-width: 75ch;
	}
}

@layer components {
	pre, .prose pre {
		@apply my-4 rounded overflow-x-auto;
	}
	
	pre code.torchlight,
	.prose pre code.torchlight {
		@apply block py-4 min-w-max;
	}
	
	pre code.torchlight .line,
	.prose pre code.torchlight .line {
		@apply px-4;
	}
	
	pre code.torchlight .line-number,
	pre code.torchlight .summary-caret,
	.prose pre code.torchlight .line-number,
	.prose pre code.torchlight .summary-caret {
		@apply mr-4;
	}
	
	.prose a.heading-permalink {
		@apply sr-only;
	}
	
	.prose a.heading-permalink:focus {
		@apply mr-1 px-1 text-stone-300 text-sm -top-0.5 relative not-sr-only;
	}
	
	.prose a.heading-permalink:hover {
		@apply text-stone-500;
	}
}

@layer utilities {
	.torchlight summary:focus {
		outline: none;
	}
	
	.torchlight details > summary::marker,
	.torchlight details > summary::-webkit-details-marker {
		display: none;
	}
	
	.torchlight details .summary-caret::after {
		pointer-events: none;
	}
	
	.torchlight .summary-caret-empty::after,
	.torchlight details .summary-caret-middle::after,
	.torchlight details .summary-caret-end::after {
		content: " ";
	}
	
	.torchlight details[open] .summary-caret-start::after {
		content: "▼";
		@apply text-slate-300 !important;
	}
	
	.torchlight details:not([open]) .summary-caret-start::after {
		content: "▶";
		@apply text-slate-300 transform rotate-90;
	}
	
	.torchlight details[open] .summary-hide-when-open {
		display: none;
	}
	
	.torchlight details:not([open]) .summary-hide-when-open {
		display: initial;
		@apply bg-slate-700 rounded text-slate-300 !important;
	}
}
